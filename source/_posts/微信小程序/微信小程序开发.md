---
title: 微信小程序开发
date: 2025-06-16 10:22:07
tags: ['微信小程序']
categories: '微信小程序'
cover: https://blog-ultimate.oss-cn-beijing.aliyuncs.com/article-image/20250616121457140.jpg
---

# 小程序文件目录结构

**小程序主体文件：**

1. app.js：小程序的入口文件。
2. app.json：小程序全局配置文件。
3. app.wxss：小程序全局样式文件。
4. project.config.json：小程序项目配置文件（团队约定）。
5. project.private.config.json：私有项目配置文件。git 提交的时候不建议提交这个文件，避免冲突。
6. sitemap.json：是否允许小程序被微信索引。

**小程序页面文件：**
小程序页面在 pages 目录下存放，每个页面要包含四个文件，分别是：

1. index.js： 当前页面的逻辑。
2. index.wxml：当前页面的结构。
3. index.wxss：当前页面的样式（优先级比 app.wxss 高）。
4. index.json：当前页面配置文件。

## app.json 配置文件

[微信开发文者档地址](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html)

```json
{
  "pages": [
    // 配置页面路由
    "pages/index/index",
    "pages/cate/cate",
    "pages/cart/cart",
    "pages/profile/profile",
    "pages/list/list"
  ],
  "window": {
    "navigationBarTextStyle": "black",
    "navigationBarTitleText": "慕尚花坊",
    "navigationBarBackgroundColor": "#f3514f",
    "enablePullDownRefresh": true, // 允许下拉刷新
    "backgroundColor": "#efefef" // 下拉刷新的时候的背景色
  },
  "tabBar": {
    "selectedColor": "#f3514f",
    "color": "#666",
    "list": [
      {
        "text": "首页",
        "pagePath": "pages/index/index",
        "iconPath": "/assets/tabbar/home.png",
        "selectedIconPath": "/assets/tabbar/home-active.png"
      },
      {
        "text": "分类",
        "pagePath": "pages/cate/cate",
        "iconPath": "/assets/tabbar/category.png",
        "selectedIconPath": "/assets/tabbar/category-active.png"
      },
      {
        "text": "购物车",
        "pagePath": "pages/cart/cart",
        "iconPath": "/assets/tabbar/cart.png",
        "selectedIconPath": "/assets/tabbar/cart-active.png"
      },
      {
        "text": "我的",
        "pagePath": "pages/profile/profile",
        "iconPath": "/assets/tabbar/profile.png",
        "selectedIconPath": "/assets/tabbar/profile-active.png"
      }
    ]
  },
  "style": "v2",
  "componentFramework": "glass-easel",
  "sitemapLocation": "sitemap.json",
  "lazyCodeLoading": "requiredComponents"
}
```

## project.config.json 配置文件

[微信开发者文档地址](https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html)

比如配置 ​​SCSS​​ 为例：

```json
{
  "compileType": "miniprogram",
  "libVersion": "trial",
  "packOptions": {
    "ignore": [],
    "include": []
  },
  "setting": {
    "coverView": true,
    "es6": true,
    "postcss": true,
    "minified": true,
    "enhance": true,
    "showShadowRootInWxmlPanel": true,
    "packNpmRelationList": [],
    "babelSetting": {
      "ignore": [],
      "disablePlugins": [],
      "outputPath": ""
    },
    "compileWorklet": false,
    "uglifyFileName": false,
    "uploadWithSourceMap": true,
    "packNpmManually": false,
    "minifyWXSS": true,
    "minifyWXML": true,
    "localPlugins": false,
    "condition": false,
    "swc": false,
    "disableSWC": true,
    "disableUseStrict": false,
    "useCompilerPlugins": ["sass"] // 在这里配置sass编译器
  },
  "condition": {},
  "editorSetting": {
    "tabIndent": "auto",
    "tabSize": 2
  },
  "appid": "wxdd41600bf0ec6904",
  "simulatorPluginLibVersion": {}
}
```
# 微信小程序样式 wxss
[微信开发者文档地址](https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html)

# 微信小程序结构 wxml
[微信开发者文档地址](https://developers.weixin.qq.com/miniprogram/dev/platform-capabilities/miniapp/component/component.html)

**小程序提供的组件：**
1. view: 容器组件，相当于html中的div
2. swiper和swiper-item
3. image
4. text
5. navigator
6. scroll-view
7. 字体图标

## navigator
### 路由跳转方式
```html
<navigator url="/pages/list/list" open-type="navigate">到商品列表页面</navigator>
```
{% note warning flat %}
`open-type="navigate"`时只能跳转到非TabBar页面。
并且保留上一级页面，就是保留返回上一级页面的箭头。
{% endnote %}

```html
<navigator url="/pages/list/list" open-type="redirect">到商品分类页面</navigator>
```
{% note warning flat %}
`open-type="redirect"`时只能跳转到非TabBar页面。
关闭上一级页面，就是保留返回首页的图标。
{% endnote %}

```html
<navigator url="/pages/cate/cate" open-type="switchTab">到商品分类页面</navigator>
```
{% note warning flat %}
`open-type="switchTab"`时只能跳转到TabBar页面。
关闭其它所有的非`TabBar`页面。
{% endnote %}

```html
<navigator url="/pages/list/list" open-type="reLaunch">到商品分类页面</navigator>
```
{% note warning flat %}
`open-type="reLaunch"`时关闭所有页面，跳转到某一个页面。
{% endnote %}

```html
<navigator open-type="navigateBack" delta="1">回到上一页</navigator>
```
{% note warning flat %}
`open-type="navigateBack"`回到上衣页面。
`delta="1"`返回一级，可以设置2级，3级...
{% endnote %}

### 路由传参
**携带参数跳转：**
```html
<navigator url="/pages/list/list?id=1&name=akbar" open-type="navigate">到商品列表页面</navigator>
```

**目标页面接受参数：**
在目标页面的`js`文件中进行接受：
```js
  /**
   * 生命周期函数--监听页面加载
   */
  onLoad(options) {
    console.log(options)
  },
```

## scroll-view
- scroll-x：允许横向滚动
- scroll-y：允许纵向滚动

# 事件对象
[微信开发者文档地址](https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html)

以`tap`事件为例：
- 原始的写法：
```html
<view bind:tap="tapName"> Click me! </view>
```
- 可以把`:`去掉：
```html
<view bindtap="tapName"> Click me! </view>
```
比如：
```html
<button type="primary" bind:tap="handler">绑定事件</button>

<button type="warn" bind:tap="handler">绑定事件</button>
```
```js
Page({
  handler(event) {
    console.log('handler')
    console.log(event)
  },
})
```

比如`input`：
```html
<input type="text" bindinput="getInputValue"></input>
```
```js
Page({
  getInputValue(event) {
    console.log(event.detail.value)
  },
})
```

## 事件冒泡
事件冒泡：当自组件的事件触发时，父组件的事件也会触发。
比如：
```html
<view class="catch" bind:tap="parentHandler">
  <button bind:tap="btnHandler">按钮</button>
</view>
```
```js
Page({
  parentHandler(event) {
    console.log('父组件绑定的事件')
    console.log(event)
  },
  btnHandler(event) {
    console.log('子组件绑定的事件')
    console.log(event)
  },
})
```
我们点击按钮的时候，父组件的事件也同时被触发。

**怎么解决这个事件冒泡？**
我们可以在子组件使用catch来绑定事件：
```html
<view class="catch" bind:tap="parentHandler">
  <button catch:tap="btnHandler">按钮</button>
</view>
```
```js
Page({
  parentHandler(event) {
    console.log('父组件绑定的事件')
    console.log(event)
  },
  btnHandler(event) {
    console.log('子组件绑定的事件')
    console.log(event)
  },
})
```
这样父组件的事件就不会被触发。

## 事件传参
```js
Page({
  buttonHandler(event) {
    console.log(event.target)
  }
})
```
{% note warning flat %}
注意：target和currentTarget指的都是同一个事件触发这。
{% endnote %}